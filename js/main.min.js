document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("projetos-container");if(e){const t=[{titulo:"Projeto Sementinha (Educa√ß√£o Ambiental)",imagem:"img/projeto-educacao.jpg",alt:"Crian√ßas em uma aula ao ar livre sobre plantas.",descricao:"Levamos oficinas de educa√ß√£o ambiental para escolas p√∫blicas, ensinando crian√ßas sobre a import√¢ncia da biodiversidade e do reflorestamento."},{titulo:"Horta Comunit√°ria Urbana",imagem:"img/projeto-reflorestamento.jpg",alt:"Horta comunit√°ria verdejante no meio da cidade.",descricao:"Transformamos terrenos baldios em hortas comunit√°rias produtivas, gerando alimento saud√°vel e fortalecendo os la√ßos da vizinhan√ßa."},{titulo:"Mutir√£o Refloresta SP",imagem:"img/home-banner.jpg",alt:"Volunt√°rios plantando √°rvGores.",descricao:"Nosso pr√≥ximo grande mutir√£o de plantio. Junte-se a n√≥s para reflorestar a Serra da Cantareira. Inscri√ß√µes abertas!"}];t.forEach(t=>{const a=`\n                <article>\n                    <h3>${t.titulo}</h3>\n                    <img src="${t.imagem}" alt="${t.alt}">\n                    <p>${t.descricao}</p>\n                </article>\n            `;e.innerHTML+=a})}const t=document.getElementById("form-cadastro");if(t){const e={nome:document.getElementById("nome"),email:document.getElementById("email"),nascimento:document.getElementById("nascimento"),cpf:document.getElementById("cpf"),telefone:document.getElementById("telefone"),cep:document.getElementById("cep"),endereco:document.getElementById("endereco"),cidade:document.getElementById("cidade"),estado:document.getElementById("estado")};function a(e){let t=e.value.replace(/\D/g,"");t=t.slice(0,11),t=t.replace(/(\d{3})(\d)/,"$1.$2"),t=t.replace(/(\d{3})\.(\d{3})(\d)/,"$1.$2.$3"),t=t.replace(/(\d{3})\.(\d{3})\.(\d{3})(\d{1,2})/,"$1.$2.$3-$4"),e.value=t}function o(e){let t=e.value.replace(/\D/g,"");t=t.slice(0,11),t=t.replace(/^(\d{2})(\d)/g,"($1) $2"),t=t.replace(/(\d{5})(\d{1,4})$/,"$1-$2"),e.value=t}function n(e){let t=e.value.replace(/\D/g,"");t=t.slice(0,8),t=t.replace(/(\d{5})(\d{1,3})$/,"$1-$2"),e.value=t}e.cpf.addEventListener("input",()=>a(e.cpf)),e.telefone.addEventListener("input",()=>o(e.telefone)),e.cep.addEventListener("input",()=>n(e.cep));const l={nome:e=>e.value.trim().length>=3,email:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value),nascimento:e=>e.value.length>0,cpf:e=>/^\d{3}\.\d{3}\.\d{3}-\d{2}$/.test(e.value),telefone:e=>/^\(\d{2}\) \d{5}-\d{4}$/.test(e.value),cep:e=>/^\d{5}-\d{3}$/.test(e.value),endereco:e=>e.value.trim().length>=5,cidade:e=>e.value.trim().length>=3,estado:e=>2===e.value.trim().length},d={nome:"O nome deve ter pelo menos 3 caracteres.",email:"Por favor, insira um e-mail v√°lido.",nascimento:"Por favor, selecione sua data de nascimento.",cpf:"Formato de CPF inv√°lido. Use 000.000.000-00.",telefone:"Formato de telefone inv√°lido. Use (00) 00000-0000.",cep:"Formato de CEP inv√°lido. Use 00000-000.",endereco:"O endere√ßo parece curto demais.",cidade:"A cidade deve ter pelo menos 3 caracteres.",estado:"O estado deve ter 2 caracteres (ex: SP)."};function r(t,a){const o=e[t],n=document.getElementById(`error-${t}`);n.textContent=a,o.classList.add("invalid"),o.classList.remove("valid"),o.setAttribute("aria-invalid","true"),o.setAttribute("aria-describedby",`error-${t}`)}function i(t){const a=e[t],o=document.getElementById(`error-${t}`);o.textContent="",a.classList.remove("invalid"),a.removeAttribute("aria-invalid"),a.removeAttribute("aria-describedby")}t.addEventListener("submit",function(a){a.preventDefault();let o=!0;for(const t in e){const a=e[t];if(a){const e=(!a.required||""!==a.value.trim())&&l[t](a);if(e)i(t),a.classList.add("valid");else{o=!1;let n=a.required&&""===a.value.trim()?"Este campo √© obrigat√≥rio.":d[t];"nascimento"!==t||e||(n=d.nascimento),r(t,n)}}}if(o){alert("Cadastro enviado com sucesso! Obrigado por se juntar √† Ra√≠zes do Amanh√£.");try{localStorage.setItem("nomeUsuario",e.nome.value.split(" ")[0])}catch(e){console.warn("N√£o foi poss√≠vel salvar no localStorage.")}t.reset();for(const t in e)e[t]&&(e[t].classList.remove("valid"),i(t))}else alert("Ops! Parece que h√° erros no seu formul√°rio. Por favor, verifique os campos em vermelho.")})}const l=document.getElementById("saudacao-principal");if(l)try{const e=localStorage.getItem("nomeUsuario");e&&(l.textContent=`Ol√°, ${e}! Bem-vindo(a) de volta!`)}catch(e){console.warn("N√£o foi poss√≠vel ler do localStorage.")}const d=document.getElementById("theme-toggle"),s=document.documentElement;try{const e=localStorage.getItem("theme");e&&(s.setAttribute("data-theme",e),"dark"===e&&d?d.textContent="üåô":d&&(d.textContent="‚òÄÔ∏è"))}catch(e){console.warn("N√£o foi poss√≠vel ler o tema salvo no localStorage.")}d&&d.addEventListener("click",()=>{const e=s.getAttribute("data-theme");if("dark"===e){s.setAttribute("data-theme","light"),d.textContent="‚òÄÔ∏è";try{localStorage.setItem("theme","light")}catch(e){console.warn("N√£o foi poss√≠vel salvar o tema no localStorage.")}}else{s.setAttribute("data-theme","dark"),d.textContent="üåô";try{localStorage.setItem("theme","dark")}catch(e){console.warn("N√£o foi poss√≠vel salvar o tema no localStorage.")}}})});